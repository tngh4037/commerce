<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.domain.customer.repository.mybatis.NoticeMapper">

    <select id="count" resultType="Integer">
        SELECT  COUNT(*)
        FROM    CUSTOMER_NOTICE
        <where>
            <if test="title != null and title != ''">
                AND TITLE LIKE CONCAT('%', #{title}, '%')
            </if>
            <if test="noticeType != null">
                AND NOTICE_TYPE = #{noticeType}
            </if>
        </where>
    </select>

    <select id="findAll" resultType="Notice">
        SELECT  NOTICE_NO, TITLE, CONTENTS, NOTICE_TYPE, HITS, DISPLAY_YN, REG_DT, MOD_DT
        FROM    CUSTOMER_NOTICE
        <where>
            <if test="title != null and title != ''">
                AND TITLE LIKE CONCAT('%', #{title}, '%')
            </if>
            <if test="noticeType != null">
                AND NOTICE_TYPE = #{noticeType}
            </if>
        </where>
        LIMIT #{startNo}, #{recordCount}
    </select>

    <select id="findById" resultType="Notice">
        SELECT  NOTICE_NO, TITLE, CONTENTS, NOTICE_TYPE, HITS, DISPLAY_YN, REG_DT, MOD_DT
        FROM    CUSTOMER_NOTICE
        WHERE   NOTICE_NO = #{noticeNo}
    </select>

    <insert id="save">
        INSERT INTO CUSTOMER_NOTICE (TITLE, CONTENTS, NOTICE_TYPE, HITS, DISPLAY_YN, REG_DT, MOD_DT)
        VALUES (#{title}, #{contents}, #{noticeType}, #{hits}, #{displayYn}, NOW(), NOW())
    </insert>

    <delete id="deleteById">
        DELETE FROM CUSTOMER_NOTICE
        WHERE NOTICE_NO = #{noticeNo}
    </delete>

</mapper>